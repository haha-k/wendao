(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78bcf541"],{"0c99":function(e,r,o){"use strict";o.r(r);var s=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("el-card",{staticClass:"box-card"},[o("div",{attrs:{slot:"header"},slot:"header"},[o("span",[e._v("注册")])]),o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-position":"left","label-width":"0px",size:"mini","hide-required-asterisk":"true","inline-message":"true"}},[o("el-form-item",{attrs:{prop:"username",required:"true",size:"mini"}},[o("el-input",{attrs:{placeholder:"用户名",autocomplete:"off"},model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}})],1),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{placeholder:"密码",type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),o("el-form-item",{attrs:{prop:"repassword"}},[o("el-input",{attrs:{placeholder:"确认密码",type:"password",autocomplete:"off"},model:{value:e.ruleForm.repassword,callback:function(r){e.$set(e.ruleForm,"repassword",r)},expression:"ruleForm.repassword"}})],1),o("el-form-item",{attrs:{prop:"phone"}},[o("el-input",{attrs:{placeholder:"手机号"},model:{value:e.ruleForm.phone,callback:function(r){e.$set(e.ruleForm,"phone",r)},expression:"ruleForm.phone"}})],1),o("el-form-item",{attrs:{prop:"email"}},[o("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),o("el-form-item",[o("el-button",{staticClass:"registerButton",attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("注册")])],1)],1),o("span",{staticClass:"sp"},[e._v("\n    已有账号？\n    "),o("router-link",{attrs:{to:e.login}},[e._v("登录")]),o("router-view")],1)],1)},t=[],a=(o("28a5"),{name:"register",data:function(){var e=this,r=function(e,r,o){""===r?o(new Error("请输入密码")):r.length<6||r.length>20?o(new Error("密码必须是6-20个字符哦")):o()},o=function(r,o,s){""===o?s(new Error("请再次输入密码")):o!==e.ruleForm.password?s(new Error("两次输入密码不一致!")):s()},s=function(r,o,s){""===o?s(new Error("请输入用户名")):o.length<2||o.length>20?s(new Error("用户名要2-20个字符哦")):e.check_username()?(s(new Error(e.error_name_message)),console.log(e.check_username())):s()},t=function(e,r,o){var s=/^1[345789]\d{9}$/;0==s.test(r)?o(new Error("请输入正确的手机号哦")):o()},a=function(e,r,o){var s=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;0==s.test(r)?o(new Error("请输入正确的邮箱号哦")):o()};return{login:{name:"login"},error_username:!1,error_name_message:"...",errors:{name:!0,password:!0,repassword:!0,email:!0,phone:!0,allow:!0,sms_code:!0},ruleForm:{username:"12hahk",password:"159875",repassword:"159875",email:"afyypp@163.com",phone:"18742528639"},rules:{password:[{validator:r,trigger:"blur"}],repassword:[{validator:o,trigger:"blur"}],username:[{validator:s,trigger:"blur"}],phone:[{validator:t,trigger:"blur"}],email:[{validator:a,trigger:"blur"}]}}},methods:{check_username:function(){var e=this,r="/api/account/username/"+this.ruleForm["username"]+"/count/?format=json";this.ruleForm["username"];return this.$axios.get(r).then(function(r){r.data.count>0?(e.error_name_message="用户名已存在",e.error_username=!0,console.log("***********")):e.error_username=!1}).catch(function(e){console.log(e.response.data)}),this.error_username},check_pwd:function(){},check_repwd:function(){},check_phone:function(){},check_sms_code:function(){},check_allow:function(){},check_email:function(){},check:function(){this.check_username(),this.check_pwd(),this.check_repwd(),this.check_phone(),this.check_sms_code(),this.check_allow(),this.check_email()},getCookie:function(e){var r="; "+document.cookie,o=r.split("; "+e+"=");if(2===o.length)return o.pop().split(";").shift()},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(e){var o="http://localhost:8000/api/account/users/";r.$axios.post(o,{username:r.ruleForm["username"],password:r.ruleForm["password"],email:r.ruleForm["email"],telephone:r.ruleForm["phone"]},{headers:{"X-CSRFToken":r.getCookie("csrftoken")}}).then(function(e){location.href="/#/login"}).catch(function(e){console.log(e.response.data),e.response.data.username&&r.$message({showClose:!0,message:e.response.data.username[0],type:"error"}),e.response.data.telephone&&r.$message({showClose:!0,message:e.response.data.telephone[0],type:"error"})})}})}}}),n=a,l=(o("955c"),o("1d97"),o("2877")),i=Object(l["a"])(n,s,t,!1,null,"59469326",null);r["default"]=i.exports},"1d97":function(e,r,o){"use strict";var s=o("a8bb"),t=o.n(s);t.a},6639:function(e,r,o){},"955c":function(e,r,o){"use strict";var s=o("6639"),t=o.n(s);t.a},a8bb:function(e,r,o){}}]);
//# sourceMappingURL=chunk-78bcf541.514f40a8.js.map